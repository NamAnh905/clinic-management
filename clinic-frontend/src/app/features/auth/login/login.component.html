<p-toast></p-toast>

<div class="medical-background">
  <div class="floating-shape shape-1"></div>
  <div class="floating-shape shape-2"></div>
  <div class="floating-shape shape-3"></div>
  <div class="floating-shape shape-4"></div>
</div>

<div class="login-container">
  <div class="wellness-card">
    <div class="organic-border"></div>

    <div class="mindful-header">
      <div class="zen-logo">
        <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="none" stroke="currentColor"/>
          <path d="M12 7v8M8 11h8" stroke="white" stroke-linecap="round"/>
        </svg>
        <div class="zen-glow"></div>
      </div>
      <h1>28Care System</h1>
      <p>Hệ thống quản lý phòng khám chuyên nghiệp</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="harmony-form">

      <div class="organic-field" [class.error]="isFieldInvalid('email')">
        <div class="field-nature"></div>
        <input
          type="text"
          id="email"
          formControlName="email"
          placeholder=" "
          autocomplete="off">
        <label for="email">Email đăng nhập</label>

        <div class="growth-indicator">
          <i class="pi pi-check leaf-sprout" *ngIf="loginForm.get('email')?.valid"></i>
        </div>

        <span class="gentle-error" *ngIf="isFieldInvalid('email')">
          <span *ngIf="loginForm.get('email')?.hasError('required')">Vui lòng nhập email.</span>
          <span *ngIf="loginForm.get('email')?.hasError('email')">Email không đúng định dạng.</span>
        </span>
      </div>

      <div class="organic-field" [class.error]="isFieldInvalid('password')">
        <div class="field-nature"></div>
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="password"
          formControlName="password"
          placeholder=" ">
        <label for="password">Mật khẩu</label>

        <button type="button" class="nature-toggle" (click)="togglePasswordVisibility()">
          <i class="pi" [ngClass]="showPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
        </button>

        <span class="gentle-error" *ngIf="isFieldInvalid('password')">
          Vui lòng nhập mật khẩu (tối thiểu 6 ký tự).
        </span>
      </div>

      <div class="mindful-options">
        <label class="zen-checkbox">
          <input type="checkbox" formControlName="remember">
          <span class="checkbox-leaf">
            <div class="leaf-shape"></div>
            <i class="pi pi-check text-white text-xs z-1 relative" style="font-size: 10px;"></i>
          </span>
          <span class="checkbox-text">Ghi nhớ đăng nhập</span>
        </label>
        <a routerLink="/forgot-password" class="healing-link">Quên mật khẩu?</a>
      </div>

      <button type="submit" class="harmony-button" [disabled]="loginForm.invalid || isLoading" [class.loading]="isLoading">
        <div class="button-earth"></div>
        <span class="button-text" *ngIf="!isLoading">Đăng nhập</span>

        <div class="button-growth" *ngIf="isLoading">
          <div class="growing-circle circle-1"></div>
          <div class="growing-circle circle-2"></div>
          <div class="growing-circle circle-3"></div>
        </div>
        <div class="button-aura"></div>
      </button>
    </form>

    <div class="natural-social">
      <button type="button" class="earth-social">
        <div class="social-earth"></div>
        <i class="pi pi-google" style="color: #EA4335;"></i>
        <span>Google</span>
      </button>

      <button type="button" class="earth-social">
        <div class="social-earth"></div>
        <i class="pi pi-facebook" style="color: #1877F2;"></i>
        <span>Facebook</span>
      </button>
    </div>

    <div class="nurture-signup">
      <span>Chưa có tài khoản? </span>
      <a routerLink="/register" class="growth-link">Đăng ký ngay</a>
    </div>
  </div>
</div>
